<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="wordCloudCanvas" width="500" height="500"></canvas>

    <div>
        <h3>Where are you From ? </h3>

        <form name="myForm" id="myForm" action="">
            <label for="your_answer">Answer
                <input type="text" id="your_answer" name="your_answer">
            </label>
            <input type="submit" value="Submit">
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.3/src/wordcloud2.min.js"></script>
<script>
    var socket = new WebSocket("ws://localhost:3000");

    var myWordCloud = { list: [] };

    // When WebSocket receives data
    socket.onmessage = function(event) {
        const data = JSON.parse(event.data); // expecting { word, weight }

        // Add word to word cloud list
        myWordCloud.list.push([data.word, data.weight]);

        // Re-render word cloud
        WordCloud(document.getElementById('wordCloudCanvas'), myWordCloud);
    };

    document.getElementById('myForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const name = document.getElementById('your_answer').value;

        // Send to WebSocket server
        socket.send(JSON.stringify({
            word: name,
            weight: Math.floor(Math.random() * 60) + 10
        }));

        document.getElementById('your_answer').value = "";
    });

    // Initial render (empty at first)
    WordCloud(document.getElementById('wordCloudCanvas'), myWordCloud);
</script>






</body>
</html>